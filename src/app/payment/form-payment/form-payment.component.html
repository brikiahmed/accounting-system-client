<form nz-form (ngSubmit)="submitForm()">
  <nz-switch
    [(ngModel)]="paymentType"
    nzCheckedChildren="C"
    nzUnCheckedChildren="$" (ngModelChange)="setValidators()" [ngModelOptions]="{standalone:true}"
  ></nz-switch>

  <div [formGroup]="paymentForm" *ngIf="paymentType">
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>check_number</nz-form-label>
      <nz-form-control [nzSpan]="12" [nzErrorTip]="checkNumberError">
        <input nz-input formControlName="check_number" placeholder="check_number"/>
        <ng-template #checkNumberError let-control>
          <ng-container *ngIf="control.hasError('required')">
            Please input your username!
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>date</nz-form-label>
      <nz-form-control [nzSpan]="12" [nzErrorTip]="dateError">
        <input nz-input formControlName="date" placeholder="date" type="email"/>
        <ng-template #dateError let-control>
          <ng-container *ngIf="control.hasError('required')">
            Please input your E-mail!
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>

  </div>

  <div>
    <span>Existing bill</span>
    <nz-switch [(ngModel)]="newBill" (ngModelChange)="setValidators()"
               [ngModelOptions]="{standalone:true}"></nz-switch>
    <span>New bill</span>
  </div>

  <!--  <nz-form-control [nzSpan]="12" *ngIf="!newBill" [nzOffset]="7">-->
  <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a bill" *ngIf="!newBill"
             [ngModelOptions]="{standalone:true}"
             [(ngModel)]="selectedBill">
    <nz-option nzLabel="{{bill.provider.name}} {{bill.date|date:'dd-MM-y'}}" nzValue="{{bill.id}}"
               *ngFor="let bill of bills"></nz-option>
  </nz-select>
  <!--  </nz-form-control>-->

  <div [formGroup]="billForm" *ngIf="newBill">


    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>date</nz-form-label>
      <nz-form-control [nzSpan]="12" [nzErrorTip]="billDateError">
        <nz-date-picker [nzFormat]="'dd-MM-yyyy'" formControlName="date"></nz-date-picker>

        <input nz-input formControlName="date" *ngIf="false" placeholder="date"/>
        <ng-template #billDateError let-control>
          <ng-container *ngIf="control.hasError('required')">
            Please input your username!
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="7" nzRequired>tax_stamp</nz-form-label>
      <nz-form-control [nzSpan]="12" [nzErrorTip]="taxStampError">
        <input nz-input formControlName="tax_stamp" placeholder="tax_stamp"/>
        <ng-template #taxStampError let-control>
          <ng-container *ngIf="control.hasError('required')">
            Please input your E-mail!
          </ng-container>
        </ng-template>
      </nz-form-control>
    </nz-form-item>


    <div>
      <span>Existing provider</span>
      <nz-switch [(ngModel)]="newProvider" (ngModelChange)="setValidators()"
                 [ngModelOptions]="{standalone:true}"></nz-switch>
      <span>New provider</span>
    </div>

    <!--  <nz-form-control [nzSpan]="12" *ngIf="!newBill" [nzOffset]="7">-->
    <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select a provider" *ngIf="!newProvider"
               [ngModelOptions]="{standalone:true}"
               [(ngModel)]="selectedProvider">
      <nz-option nzLabel="{{provider.name}}" nzValue="{{provider.id}}"
                 *ngFor="let provider of providers"></nz-option>
    </nz-select>

    <div [formGroup]="providerForm" *ngIf="newProvider">

      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>name</nz-form-label>
        <nz-form-control [nzSpan]="12" [nzErrorTip]="nameError">
          <input nz-input formControlName="name" placeholder="name"/>
          <ng-template #nameError let-control>
            <ng-container *ngIf="control.hasError('required')">
              Please input your E-mail!
            </ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>

    </div>
  </div>

  <div>

  </div>

  <!--  <nz-form-item>-->
  <!--    <nz-form-label [nzSpan]="7" nzRequired>Confirm Password</nz-form-label>-->
  <!--    <nz-form-control [nzSpan]="12" nzHasFeedback [nzErrorTip]="passwordErrorTpl">-->
  <!--      <input nz-input type="password" formControlName="confirm" placeholder="confirm your password" />-->
  <!--      <ng-template #passwordErrorTpl let-control>-->
  <!--        <ng-container *ngIf="control.hasError('required')">-->
  <!--          Please confirm your password!-->
  <!--        </ng-container>-->
  <!--        <ng-container *ngIf="control.hasError('confirm')">-->
  <!--          Password is inconsistent!-->
  <!--        </ng-container>-->
  <!--      </ng-template>-->
  <!--    </nz-form-control>-->
  <!--  </nz-form-item>-->
  <!--  <nz-form-item>-->
  <!--    <nz-form-label [nzSpan]="7" nzRequired>Comment</nz-form-label>-->
  <!--    <nz-form-control [nzSpan]="12" nzErrorTip="Please write something here!">-->
  <!--      <textarea formControlName="comment" nz-input rows="2" placeholder="write any thing"></textarea>-->
  <!--    </nz-form-control>-->
  <!--  </nz-form-item>-->
  <nz-form-item>
    <nz-form-control [nzOffset]="7" [nzSpan]="12">
      <button nz-button nzType="primary"
              [disabled]="!(
              (!paymentType&&((!newBill&&selectedBill)||(newBill&&billForm.valid&&!newProvider&&selectedProvider)||(!newBill&&selectedBill)||(newBill&&billForm.valid&&newProvider&&providerForm.valid)))||
              ((paymentType&&paymentForm.valid)&&((!newBill&&selectedBill)||(newBill&&billForm.valid&&!newProvider&&selectedProvider)||(!newBill&&selectedBill)||(newBill&&billForm.valid&&newProvider&&providerForm.valid)))
              )"
      >
        <!--              [disabled]="!paymentForm.valid&&(!newBill||!billForm.valid)&&(newBill||!selectedBill)"-->
        Submit
      </button>
      <button nz-button (click)="resetForm($event)">Reset</button>
    </nz-form-control>
  </nz-form-item>
</form>
